#
# Changelog - beacon.conf
#
# [v1.1.0]
# - Enhanced integration with Docker environment variables
# - Improved Leeds Space Comms specific settings
# - Added dynamic configuration support
# - Enhanced beacon scheduling capabilities
# - Improved GPS and mobile operation support
#
# [Purpose]
# - Provides flexible beacon configuration options
# - Supports both fixed and mobile station operations
# - Enables customization of beacon content and timing
# - Integrates with Direwolf for automated beaconing
# - Supports Leeds Space Comms educational activities
#

# Beacon Configuration for Leeds APRS Pi v1.1.0
# This file contains beacon-specific settings
# Values marked with ${VARIABLE} will be substituted by environment variables

# ============================================================================
# BASIC BEACON SETTINGS
# ============================================================================
# Your amateur radio callsign (from environment)
CALLSIGN=${CALLSIGN:-G0ABC}

# APRS-IS passcode (from environment)
APRS_PASS=${APRS_PASS:-12345}

# ============================================================================
# POSITION SETTINGS
# ============================================================================
# Station position (from environment or defaults to Leeds University)
LATITUDE=${LAT:-53.8008}
LONGITUDE=${LON:-1.5491}

# Altitude in meters (Leeds University approximate elevation)
ALTITUDE=${ALTITUDE:-100}

# Grid square calculation (IO93ST for Leeds)
GRID_SQUARE=${GRID_SQUARE:-IO93ST}

# ============================================================================
# BEACON CONTENT
# ============================================================================
# Main beacon message (from environment)
BEACON_MESSAGE="${BEACON_MESSAGE:-Leeds Space Comms APRS Node}"

# Extended beacon information
BEACON_COMMENT="${BEACON_COMMENT:-Educational APRS station - University of Leeds}"

# Web link for more information
BEACON_URL="${BEACON_URL:-https://github.com/leedsspacecomms/leeds-aprs-pi}"

# Additional information
BEACON_INFO="73 de Leeds Space Comms!"

# ============================================================================
# BEACON TIMING
# ============================================================================
# Beacon interval in seconds (from environment, default 10 minutes)
BEACON_INTERVAL=${BEACON_INTERVAL:-600}

# Initial delay before first beacon (seconds)
BEACON_DELAY=${BEACON_DELAY:-60}

# Randomization factor to avoid collisions (±seconds)
BEACON_JITTER=${BEACON_JITTER:-30}

# ============================================================================
# APRS SYMBOLS
# ============================================================================
# Primary symbol table (from environment)
SYMBOL_TABLE="${SYMBOL_TABLE:-/}"

# Symbol code for your station type (from environment)
SYMBOL_CODE="${SYMBOL_CODE:-&}"

# Common symbols reference:
# & = Gateway/IGate (default for fixed stations)
# > = Car (mobile)
# ^ = Aircraft
# - = House (QTH)
# R = Repeater
# E = Educational/Special Event
# F = Field Day

# ============================================================================
# GPS BEACON SETTINGS (for mobile operation)
# ============================================================================
# Enable GPS beaconing if GPS device is present
GPS_ENABLED=${GPS_ENABLED:-true}

# GPS beacon interval (seconds) - more frequent for mobile
GPS_BEACON_INTERVAL=${GPS_BEACON_INTERVAL:-300}

# GPS beacon message
GPS_BEACON_MESSAGE="${GPS_BEACON_MESSAGE:-Leeds Space Comms Mobile}"

# GPS symbol (> for vehicle, ^ for aircraft)
GPS_SYMBOL="${GPS_SYMBOL:->}"

# ============================================================================
# LEEDS SPACE COMMS SPECIFIC SETTINGS
# ============================================================================
# Club-specific beacon configurations

# Regular club activities
CLUB_NET_TIME="19:00"
CLUB_NET_MESSAGE="Leeds Space Comms - Weekly Net Tonight 7PM"

# Educational mode for demonstrations
EDUCATIONAL_MODE=${EDUCATIONAL_MODE:-false}
EDUCATIONAL_MESSAGE="Leeds Space Comms - Educational Demo Station"
EDUCATIONAL_INTERVAL=180  # 3 minutes for demos

# University term schedule awareness
TERM_SCHEDULE=${TERM_SCHEDULE:-true}
VACATION_MESSAGE="Leeds Space Comms - University Vacation Period"

# ============================================================================
# ADVANCED BEACON OPTIONS
# ============================================================================
# Beacon on startup
BEACON_ON_STARTUP=${BEACON_ON_STARTUP:-true}

# Beacon compression (saves bandwidth)
BEACON_COMPRESSED=${BEACON_COMPRESSED:-true}

# Weather beacon (if weather station connected)
WEATHER_BEACON=${WEATHER_BEACON:-false}
WEATHER_INTERVAL=1800  # 30 minutes

# Telemetry beacon (for sensor data)
TELEMETRY_BEACON=${TELEMETRY_BEACON:-false}
TELEMETRY_INTERVAL=3600  # 1 hour

# ============================================================================
# MULTIPLE BEACON PROFILES
# ============================================================================
# Profile-based beacon configurations for different scenarios

# Profile 1: Fixed station (club house)
[PROFILE_FIXED]
MESSAGE="Leeds Space Comms - Club Station"
COMMENT="University of Leeds Amateur Radio Society"
SYMBOL="&"
INTERVAL=600
POWER=10

# Profile 2: Mobile operation (field activities)
[PROFILE_MOBILE]
MESSAGE="Leeds Space Comms - Mobile"
COMMENT="Educational field activity"
SYMBOL=">"
INTERVAL=300
POWER=5

# Profile 3: Special event (open days, demonstrations)
[PROFILE_EVENT]
MESSAGE="Leeds Space Comms - Special Event"
COMMENT="University Open Day - Amateur Radio Demo"
SYMBOL="E"
INTERVAL=180
POWER=5

# Profile 4: Emergency communications training
[PROFILE_EMERGENCY_TRAINING]
MESSAGE="Leeds Space Comms - EmComm Training"
COMMENT="Emergency communications exercise"
SYMBOL="!"
INTERVAL=120
POWER=10

# Profile 5: Field Day operations
[PROFILE_FIELD_DAY]
MESSAGE="Leeds Space Comms - Field Day"
COMMENT="RSGB Field Day - University of Leeds"
SYMBOL="F"
INTERVAL=300
POWER=25

# ============================================================================
# BEACON SCHEDULE
# ============================================================================
# Time-based beacon scheduling (24-hour format)
# Format: HH:MM=MESSAGE

# Morning startup
08:00="Leeds Space Comms - Good Morning from the University of Leeds!"

# Midday status
12:00="Leeds Space Comms - Midday operational check"

# Evening net reminder
18:30="Leeds Space Comms - Evening net at 19:00 on 145.500 MHz"

# Net time beacon
19:00="Leeds Space Comms - Net starting now on 145.500 MHz"

# End of day
22:00="Leeds Space Comms - QRT for tonight, 73!"

# ============================================================================
# UNIVERSITY SCHEDULE INTEGRATION
# ============================================================================
# Term-time specific beacons

# Monday morning (start of week)
MON:09:00="Leeds Space Comms - New week, new projects!"

# Wednesday lunchtime (lab sessions)
WED:12:00="Leeds Space Comms - Lab sessions this afternoon"

# Friday evening (week wrap-up)
FRI:17:00="Leeds Space Comms - Have a great weekend!"

# ============================================================================
# EMERGENCY BEACON
# ============================================================================
# Emergency beacon settings (use with extreme caution)
EMERGENCY_ENABLED=${EMERGENCY_ENABLED:-false}
EMERGENCY_MESSAGE="EMERGENCY - Leeds Space Comms needs assistance"
EMERGENCY_INTERVAL=60
EMERGENCY_SYMBOL="!"
EMERGENCY_PRIORITY=true

# Emergency contact information
EMERGENCY_CONTACT="University Security: +44 113 343 2222"

# ============================================================================
# BEACON FILTERS AND SCHEDULING
# ============================================================================
# Days of week to beacon (1=Monday, 7=Sunday)
BEACON_DAYS="${BEACON_DAYS:-1,2,3,4,5,6,7}"

# Hours of day to beacon (0-23) - respect quiet hours
BEACON_HOURS="${BEACON_HOURS:-6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22}"

# Quiet hours (no beacons during these times)
QUIET_HOURS="23,0,1,2,3,4,5"

# Term-time only beacons
TERM_TIME_ONLY=${TERM_TIME_ONLY:-false}

# ============================================================================
# INTEGRATION SETTINGS
# ============================================================================
# APRS-IS server settings (from environment)
APRS_SERVER="${APRS_SERVER:-noam.aprs2.net}"
APRS_PORT=${APRS_PORT:-14580}

# Backup APRS-IS servers
APRS_BACKUP_SERVERS="euro.aprs2.net,asia.aprs2.net,aunz.aprs2.net"

# Server rotation interval (seconds)
SERVER_ROTATION=86400  # 24 hours

# ============================================================================
# QUALITY OF SERVICE
# ============================================================================
# Bandwidth conservation
LOW_BANDWIDTH_MODE=${LOW_BANDWIDTH_MODE:-false}
COMPRESSED_PACKETS=${COMPRESSED_PACKETS:-true}

# Rate limiting to be a good APRS citizen
MAX_BEACONS_PER_HOUR=${MAX_BEACONS_PER_HOUR:-6}
RATE_LIMIT_ENABLED=${RATE_LIMIT_ENABLED:-true}

# ============================================================================
# LOGGING AND MONITORING
# ============================================================================
# Beacon logging
BEACON_LOG=${BEACON_LOG:-true}
BEACON_LOG_FILE="${BEACON_LOG_FILE:-/app/logs/beacon.log}"

# Log level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=${LOG_LEVEL:-INFO}

# Log rotation
LOG_ROTATION=${LOG_ROTATION:-true}
LOG_MAX_SIZE="10M"
LOG_MAX_FILES=5

# Performance monitoring
PERFORMANCE_LOG=${PERFORMANCE_LOG:-true}
STATS_INTERVAL=3600  # 1 hour

# ============================================================================
# SECURITY AND VALIDATION
# ============================================================================
# Beacon content validation
VALIDATE_CONTENT=${VALIDATE_CONTENT:-true}
MAX_MESSAGE_LENGTH=67  # APRS spec limit

# Callsign validation
VALIDATE_CALLSIGN=${VALIDATE_CALLSIGN:-true}

# Position validation (ensure coordinates are reasonable)
VALIDATE_POSITION=${VALIDATE_POSITION:-true}

# ============================================================================
# EXPERIMENTAL FEATURES
# ============================================================================
# APRS messaging support
MESSAGING_ENABLED=${MESSAGING_ENABLED:-false}

# Automatic position reporting from GPS
AUTO_GPS_REPORTING=${AUTO_GPS_REPORTING:-true}

# Weather station integration
WEATHER_STATION_ENABLED=${WEATHER_STATION_ENABLED:-false}

# IoT sensor data beacons
IOT_INTEGRATION=${IOT_INTEGRATION:-false}

# ============================================================================
# LEEDS SPACE COMMS CONTACT INFORMATION
# ============================================================================
# Club contact details (included in beacon comments when appropriate)
CLUB_EMAIL="info@leedsspacecomms.org"
CLUB_WEBSITE="https://github.com/leedsspacecomms"
CLUB_FREQUENCY="145.500 MHz"

# Faculty supervisor contact
FACULTY_CONTACT="Faculty of Engineering, University of Leeds"

# ============================================================================
# VERSION INFORMATION
# ============================================================================
CONFIG_VERSION="1.1.0"
CONFIG_DATE="2025-01-12"
CONFIG_AUTHOR="Leeds Space Communications Society"

# ============================================================================
# END OF CONFIGURATION
# ============================================================================
# 
# For more information:
# - Leeds Space Comms: https://github.com/leedsspacecomms
# - APRS Protocol: http://www.aprs.org/
# - Direwolf Documentation: https://github.com/wb2osz/direwolf
# - University of Leeds: https://www.leeds.ac.uk/
#
# 73 de Leeds Space Comms!
# G0??? - University of Leeds Amateur Radio Society
